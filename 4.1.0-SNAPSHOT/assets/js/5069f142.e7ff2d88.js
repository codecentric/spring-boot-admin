"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2570],{2070:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"integration/consul","title":"Consul Integration","description":"HashiCorp Consul is a service mesh solution that provides service discovery, health checking, and key-value storage.","source":"@site/docs/04-integration/20-consul.md","sourceDirName":"04-integration","slug":"/integration/consul","permalink":"/4.1.0-SNAPSHOT/docs/integration/consul","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"sidebar_custom_props":{"icon":"cloud"}},"sidebar":"sidebar","previous":{"title":"Eureka Integration","permalink":"/4.1.0-SNAPSHOT/docs/integration/eureka"},"next":{"title":"Zookeeper Integration","permalink":"/4.1.0-SNAPSHOT/docs/integration/zookeeper"}}');var a=i(4848),l=i(8453);const t={sidebar_position:20,sidebar_custom_props:{icon:"cloud"}},r="Consul Integration",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Setting Up Consul",id:"setting-up-consul",level:2},{value:"Install Consul",id:"install-consul",level:3},{value:"Start Consul",id:"start-consul",level:3},{value:"Configuring Spring Boot Admin Server",id:"configuring-spring-boot-admin-server",level:2},{value:"Add Dependencies",id:"add-dependencies",level:3},{value:"Enable Discovery",id:"enable-discovery",level:3},{value:"Configure Consul Client",id:"configure-consul-client",level:3},{value:"Ignore Consul Service",id:"ignore-consul-service",level:3},{value:"Configuring Client Applications",id:"configuring-client-applications",level:2},{value:"Add Dependencies",id:"add-dependencies-1",level:3},{value:"Enable Discovery",id:"enable-discovery-1",level:3},{value:"Configure Application",id:"configure-application",level:3},{value:"Metadata in Consul",id:"metadata-in-consul",level:2},{value:"Important: No Dots in Keys",id:"important-no-dots-in-keys",level:3},{value:"Adding Custom Metadata",id:"adding-custom-metadata",level:3},{value:"Tags",id:"tags",level:3},{value:"Custom Management Configuration",id:"custom-management-configuration",level:2},{value:"Different Management Port",id:"different-management-port",level:3},{value:"Custom Health Check Path",id:"custom-health-check-path",level:3},{value:"Health Checks",id:"health-checks",level:2},{value:"Default Health Check",id:"default-health-check",level:3},{value:"Custom Health Check",id:"custom-health-check",level:3},{value:"TTL Health Check",id:"ttl-health-check",level:3},{value:"Service Filtering",id:"service-filtering",level:2},{value:"By Service Name",id:"by-service-name",level:3},{value:"By Metadata",id:"by-metadata",level:3},{value:"By Tags",id:"by-tags",level:3},{value:"Securing Consul",id:"securing-consul",level:2},{value:"ACL Token",id:"acl-token",level:3},{value:"TLS/SSL",id:"tlsssl",level:3},{value:"Docker Compose Example",id:"docker-compose-example",level:2},{value:"Kubernetes Integration",id:"kubernetes-integration",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Service Not Appearing",id:"service-not-appearing",level:3},{value:"Metadata Not Working",id:"metadata-not-working",level:3},{value:"Health Check Failing",id:"health-check-failing",level:3},{value:"Deregistration Issues",id:"deregistration-issues",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"consul-integration",children:"Consul Integration"})}),"\n",(0,a.jsx)(n.p,{children:"HashiCorp Consul is a service mesh solution that provides service discovery, health checking, and key-value storage.\nThis guide shows how to integrate Spring Boot Admin with Consul."}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"With Consul integration:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Applications register with Consul"}),"\n",(0,a.jsx)(n.li,{children:"Spring Boot Admin Server discovers applications via Consul"}),"\n",(0,a.jsx)(n.li,{children:"Built-in health checks"}),"\n",(0,a.jsx)(n.li,{children:"No Spring Boot Admin Client library required"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Apps[Applications]\n    Agent[Consul Agent]\n    Server[Consul Server<br/>Service Registry]\n    Admin[Spring Boot Admin<br/>Server]\n\n    Apps --\x3e|Register| Agent\n    Agent --\x3e|Sync| Server\n    Admin --\x3e|Discover| Server\n    Admin -.->|Monitor| Apps"}),"\n",(0,a.jsx)(n.h2,{id:"setting-up-consul",children:"Setting Up Consul"}),"\n",(0,a.jsx)(n.h3,{id:"install-consul",children:"Install Consul"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install consul\n\n# Linux\nwget https://releases.hashicorp.com/consul/1.17.0/consul_1.17.0_linux_amd64.zip\nunzip consul_1.17.0_linux_amd64.zip\nsudo mv consul /usr/local/bin/\n\n# Docker\ndocker run -d --name=consul -p 8500:8500 consul:latest\n"})}),"\n",(0,a.jsx)(n.h3,{id:"start-consul",children:"Start Consul"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Development mode\nconsul agent -dev\n\n# Production mode\nconsul agent -server -bootstrap-expect=1 -data-dir=/tmp/consul\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Access Consul UI at: ",(0,a.jsx)(n.code,{children:"http://localhost:8500"})]}),"\n",(0,a.jsx)(n.h2,{id:"configuring-spring-boot-admin-server",children:"Configuring Spring Boot Admin Server"}),"\n",(0,a.jsx)(n.h3,{id:"add-dependencies",children:"Add Dependencies"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependencies>\n    <dependency>\n        <groupId>de.codecentric</groupId>\n        <artifactId>spring-boot-admin-starter-server</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-webflux</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-consul-discovery</artifactId>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-discovery",children:"Enable Discovery"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",metastring:'title="SpringBootAdminConsulApplication.java"',children:"import de.codecentric.boot.admin.server.config.EnableAdminServer;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\n\n@EnableDiscoveryClient\n@EnableAdminServer\n@SpringBootApplication\npublic class SpringBootAdminConsulApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootAdminConsulApplication.class, args);\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"configure-consul-client",children:"Configure Consul Client"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:'spring:\n  application:\n    name: spring-boot-admin-server\n  cloud:\n    consul:\n      host: localhost\n      port: 8500\n      discovery:\n        preferIpAddress: true\n        health-check-interval: 10s\n        health-check-path: /actuator/health\n        instance-id: ${spring.application.name}:${random.value}\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: "*"\n  endpoint:\n    health:\n      show-details: ALWAYS\n'})}),"\n",(0,a.jsx)(n.h3,{id:"ignore-consul-service",children:"Ignore Consul Service"}),"\n",(0,a.jsx)(n.p,{children:"Don't monitor Consul itself:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      discovery:\n        ignored-services: consul\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configuring-client-applications",children:"Configuring Client Applications"}),"\n",(0,a.jsx)(n.h3,{id:"add-dependencies-1",children:"Add Dependencies"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-consul-discovery</artifactId>\n</dependency>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"enable-discovery-1",children:"Enable Discovery"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"@EnableDiscoveryClient\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"configure-application",children:"Configure Application"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:'spring:\n  application:\n    name: my-application\n  cloud:\n    consul:\n      host: localhost\n      port: 8500\n      discovery:\n        metadata:\n          management-context-path: ${management.server.base-path:/actuator}\n          health-path: ${management.endpoints.web.path-mapping.health:health}\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: "*"\n      base-path: /actuator\n  endpoint:\n    health:\n      show-details: ALWAYS\n'})}),"\n",(0,a.jsx)(n.h2,{id:"metadata-in-consul",children:"Metadata in Consul"}),"\n",(0,a.jsx)(n.h3,{id:"important-no-dots-in-keys",children:"Important: No Dots in Keys"}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsxs)(n.p,{children:["Consul ",(0,a.jsxs)(n.strong,{children:["does not allow dots (",(0,a.jsx)(n.code,{children:"."}),")"]})," in metadata keys. Use dashes (",(0,a.jsx)(n.code,{children:"-"}),") or underscores (",(0,a.jsx)(n.code,{children:"_"}),") instead."]})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Wrong"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"metadata:\n  user.name: admin       # \u274c Won't work\n  user.password: secret  # \u274c Won't work\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Correct"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"metadata:\n  user-name: admin       # \u2705 Works\n  user-password: secret  # \u2705 Works\n"})}),"\n",(0,a.jsx)(n.h3,{id:"adding-custom-metadata",children:"Adding Custom Metadata"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  cloud:\n    consul:\n      discovery:\n        metadata:\n          management-context-path: /actuator\n          health-path: /ping\n          user-name: ${spring.security.user.name}\n          user-password: ${spring.security.user.password}\n          tags-environment: production\n          tags-region: us-east-1\n          team: platform\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tags",children:"Tags"}),"\n",(0,a.jsx)(n.p,{children:"Consul supports tags for grouping:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  cloud:\n    consul:\n      discovery:\n        tags:\n          - production\n          - us-east-1\n          - platform-team\n"})}),"\n",(0,a.jsx)(n.h2,{id:"custom-management-configuration",children:"Custom Management Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"different-management-port",children:"Different Management Port"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"server:\n  port: 8080\n\nmanagement:\n  server:\n    port: 9090\n  endpoints:\n    web:\n      base-path: /management\n\nspring:\n  cloud:\n    consul:\n      discovery:\n        metadata:\n          management-port: 9090\n          management-context-path: /management\n"})}),"\n",(0,a.jsx)(n.h3,{id:"custom-health-check-path",children:"Custom Health Check Path"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"management:\n  endpoints:\n    web:\n      path-mapping:\n        health: /ping\n      base-path: /actuator\n\nspring:\n  cloud:\n    consul:\n      discovery:\n        health-check-path: /actuator/ping\n        metadata:\n          health-path: /ping\n"})}),"\n",(0,a.jsx)(n.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,a.jsx)(n.h3,{id:"default-health-check",children:"Default Health Check"}),"\n",(0,a.jsx)(n.p,{children:"Consul automatically creates HTTP health check:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        health-check-interval: 10s\n        health-check-timeout: 5s\n        health-check-path: /actuator/health\n"})}),"\n",(0,a.jsx)(n.h3,{id:"custom-health-check",children:"Custom Health Check"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        health-check-url: https://my-app.example.com/actuator/health\n        health-check-interval: 15s\n        health-check-critical-timeout: 30s\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ttl-health-check",children:"TTL Health Check"}),"\n",(0,a.jsx)(n.p,{children:"Use TTL-based health check instead of HTTP:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        health-check-interval: 10s\n        heartbeat:\n          enabled: true\n          ttl-value: 15\n          ttl-unit: s\n"})}),"\n",(0,a.jsx)(n.h2,{id:"service-filtering",children:"Service Filtering"}),"\n",(0,a.jsx)(n.h3,{id:"by-service-name",children:"By Service Name"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml (Admin Server)"',children:"spring:\n  boot:\n    admin:\n      discovery:\n        ignored-services: consul,config-server\n"})}),"\n",(0,a.jsx)(n.h3,{id:"by-metadata",children:"By Metadata"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Bean\npublic InstanceFilter consulInstanceFilter() {\n    return registration -> {\n        // Only monitor services with \'monitor\' tag\n        Map<String, String> metadata = registration.getMetadata();\n        return "true".equals(metadata.get("monitor"));\n    };\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"by-tags",children:"By Tags"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Bean\npublic InstanceFilter tagBasedFilter() {\n    return registration -> {\n        String tags = registration.getMetadata().get("tags");\n        return tags != null && tags.contains("production");\n    };\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"securing-consul",children:"Securing Consul"}),"\n",(0,a.jsx)(n.h3,{id:"acl-token",children:"ACL Token"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  cloud:\n    consul:\n      host: localhost\n      port: 8500\n      discovery:\n        acl-token: ${CONSUL_ACL_TOKEN}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tlsssl",children:"TLS/SSL"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  cloud:\n    consul:\n      host: localhost\n      port: 8501\n      scheme: https\n      tls:\n        enabled: true\n        cert-path: /path/to/cert.pem\n        key-path: /path/to/key.pem\n        ca-cert-path: /path/to/ca.pem\n"})}),"\n",(0,a.jsx)(n.h2,{id:"docker-compose-example",children:"Docker Compose Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:'version: \'3\'\n\nservices:\n  consul:\n    image: consul:latest\n    ports:\n      - "8500:8500"\n      - "8600:8600/udp"\n    command: agent -server -ui -bootstrap-expect=1 -client=0.0.0.0\n\n  spring-boot-admin:\n    build: ./admin-server\n    ports:\n      - "8080:8080"\n    environment:\n      - SPRING_CLOUD_CONSUL_HOST=consul\n    depends_on:\n      - consul\n\n  my-application:\n    build: ./my-app\n    ports:\n      - "8081:8081"\n    environment:\n      - SPRING_CLOUD_CONSUL_HOST=consul\n    depends_on:\n      - consul\n'})}),"\n",(0,a.jsx)(n.h2,{id:"kubernetes-integration",children:"Kubernetes Integration"}),"\n",(0,a.jsx)(n.p,{children:"For Kubernetes, use Consul Connect:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  cloud:\n    consul:\n      host: consul.service.consul\n      port: 8500\n      discovery:\n        preferIpAddress: false\n        hostname: ${HOSTNAME}.my-app.default.svc.cluster.local\n        metadata:\n          k8s-namespace: ${POD_NAMESPACE:default}\n          k8s-pod: ${HOSTNAME}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"service-not-appearing",children:"Service Not Appearing"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Check Consul registration"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8500/v1/catalog/services\ncurl http://localhost:8500/v1/health/service/my-application\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Verify health check"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"consul catalog services\nconsul catalog nodes -service=my-application\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Check metadata"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8500/v1/catalog/service/my-application | jq\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"metadata-not-working",children:"Metadata Not Working"}),"\n",(0,a.jsx)(n.p,{children:"Ensure no dots in keys:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Wrong\nmetadata:\n  user.name: admin\n\n# Correct\nmetadata:\n  user-name: admin\n"})}),"\n",(0,a.jsx)(n.h3,{id:"health-check-failing",children:"Health Check Failing"}),"\n",(0,a.jsx)(n.p,{children:"Verify endpoint is accessible:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8081/actuator/health\n"})}),"\n",(0,a.jsx)(n.p,{children:"Check Consul health status:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"consul catalog nodes -service=my-application -detailed\n"})}),"\n",(0,a.jsx)(n.h3,{id:"deregistration-issues",children:"Deregistration Issues"}),"\n",(0,a.jsx)(n.p,{children:"Configure critical timeout:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        health-check-critical-timeout: 30s\n"})}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Use Instance IDs"}),": Ensure unique instance identifiers"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        instance-id: ${spring.application.name}:${random.value}\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Configure Health Checks"}),": Set appropriate intervals"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        health-check-interval: 10s\n        health-check-critical-timeout: 1m\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Use Metadata for Credentials"}),": Avoid hardcoding"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        metadata:\n          user-name: ${ACTUATOR_USER}\n          user-password: ${ACTUATOR_PASSWORD}\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Prefer IP Address"}),": For container environments"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        preferIpAddress: true\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Use Tags"}),": For service categorization"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        tags:\n          - production\n          - microservice\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Enable Deregistration"}),": Clean up on shutdown"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"spring:\n  cloud:\n    consul:\n      discovery:\n        deregister: true\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Monitor Consul Health"}),": Ensure Consul is operational"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"consul members\nconsul info\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,a.jsxs)(n.p,{children:["See\nthe ",(0,a.jsx)(n.a,{href:"https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-consul/",children:"spring-boot-admin-sample-consul"}),"\nproject for a complete working example."]}),"\n",(0,a.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/4.1.0-SNAPSHOT/docs/client/service-discovery",children:"Service Discovery"})," - Service discovery overview"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/4.1.0-SNAPSHOT/docs/samples/sample-consul",children:"Consul Sample"})," - Detailed sample walkthrough"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/4.1.0-SNAPSHOT/docs/client/metadata",children:"Metadata"})," - Working with metadata"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/4.1.0-SNAPSHOT/docs/server/security",children:"Security"})," - Securing discovered services"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>r});var s=i(6540);const a={},l=s.createContext(a);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);