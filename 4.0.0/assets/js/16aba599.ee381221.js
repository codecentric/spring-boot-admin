"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6575],{8927:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"samples/sample-eureka","title":"Eureka Sample","description":"The Eureka sample demonstrates Spring Boot Admin Server integration with Netflix Eureka service discovery. This sample","source":"@site/docs/09-samples/30-sample-eureka.md","sourceDirName":"09-samples","slug":"/samples/sample-eureka","permalink":"/4.0.0/docs/samples/sample-eureka","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_position":30,"sidebar_custom_props":{"icon":"file-code"}},"sidebar":"sidebar","previous":{"title":"Reactive Sample","permalink":"/4.0.0/docs/samples/sample-reactive"},"next":{"title":"Consul Sample","permalink":"/4.0.0/docs/samples/sample-consul"}}');var s=r(4848),t=r(8453);const a={sidebar_position:30,sidebar_custom_props:{icon:"file-code"}},l="Eureka Sample",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Running the Sample",id:"running-the-sample",level:2},{value:"Option 1: With External Eureka Server",id:"option-1-with-external-eureka-server",level:3},{value:"Start Eureka Server",id:"start-eureka-server",level:4},{value:"Start Admin Server",id:"start-admin-server",level:4},{value:"Option 2: Using Docker Compose (Recommended)",id:"option-2-using-docker-compose-recommended",level:3},{value:"Change Eureka URL",id:"change-eureka-url",level:3},{value:"Project Structure",id:"project-structure",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"Main Application Class",id:"main-application-class",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Admin Server Configuration",id:"admin-server-configuration",level:3},{value:"Client Application Configuration",id:"client-application-configuration",level:3},{value:"Security Configuration",id:"security-configuration",level:2},{value:"Insecure Profile",id:"insecure-profile",level:3},{value:"Secure Profile (Default)",id:"secure-profile-default",level:3},{value:"Docker Compose Setup",id:"docker-compose-setup",level:2},{value:"Complete Stack",id:"complete-stack",level:3},{value:"Start Stack",id:"start-stack",level:3},{value:"Stop Stack",id:"stop-stack",level:3},{value:"View Logs",id:"view-logs",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Service Discovery Flow",id:"service-discovery-flow",level:3},{value:"Metadata Mapping",id:"metadata-mapping",level:3},{value:"Testing the Sample",id:"testing-the-sample",level:2},{value:"Verify Eureka Registration",id:"verify-eureka-registration",level:3},{value:"Verify Admin Server Discovery",id:"verify-admin-server-discovery",level:3},{value:"Test Dynamic Discovery",id:"test-dynamic-discovery",level:3},{value:"Register New Service",id:"register-new-service",level:4},{value:"Deregister Service",id:"deregister-service",level:4},{value:"Test Health Status Changes",id:"test-health-status-changes",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom Service Filtering",id:"custom-service-filtering",level:3},{value:"Service Grouping",id:"service-grouping",level:3},{value:"Secure Actuator Endpoints",id:"secure-actuator-endpoints",level:3},{value:"Custom Health Check URL",id:"custom-health-check-url",level:3},{value:"Comparison: Eureka vs. Direct Registration",id:"comparison-eureka-vs-direct-registration",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Admin Server Not Discovering Services",id:"admin-server-not-discovering-services",level:3},{value:"Services Show as DOWN",id:"services-show-as-down",level:3},{value:"Slow Discovery",id:"slow-discovery",level:3},{value:"Docker Compose Issues",id:"docker-compose-issues",level:3},{value:"Production Considerations",id:"production-considerations",level:2},{value:"High Availability",id:"high-availability",level:3},{value:"Security",id:"security",level:3},{value:"Performance Tuning",id:"performance-tuning",level:3},{value:"Monitoring Eureka Itself",id:"monitoring-eureka-itself",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"eureka-sample",children:"Eureka Sample"})}),"\n",(0,s.jsx)(n.p,{children:"The Eureka sample demonstrates Spring Boot Admin Server integration with Netflix Eureka service discovery. This sample\nshows how to automatically discover and monitor Spring Boot applications registered with Eureka without using the Admin\nClient."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"spring-boot-admin-samples/spring-boot-admin-sample-eureka/"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic service discovery via Eureka"}),"\n",(0,s.jsx)(n.li,{children:"No Admin Client required on monitored applications"}),"\n",(0,s.jsx)(n.li,{children:"Dynamic instance registration and deregistration"}),"\n",(0,s.jsx)(n.li,{children:"Metadata-based configuration"}),"\n",(0,s.jsx)(n.li,{children:"Docker Compose setup with multiple services"}),"\n",(0,s.jsx)(n.li,{children:"Spring Security integration"}),"\n",(0,s.jsx)(n.li,{children:"Health check integration with Eureka"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Java 17 or higher"}),"\n",(0,s.jsx)(n.li,{children:"Maven 3.6+"}),"\n",(0,s.jsx)(n.li,{children:"Docker and Docker Compose (for full stack)"}),"\n",(0,s.jsx)(n.li,{children:"Eureka Server running (or use Docker Compose)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TD\n    ES[Eureka Server<br/>Port 8761] --\x3e|Service Registry| AS[Admin Server<br/>Port 8080]\n    ES --\x3e|Service Registry| MA[Monitored Apps]"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Key Points"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Applications register with Eureka"}),"\n",(0,s.jsx)(n.li,{children:"Admin Server discovers applications from Eureka"}),"\n",(0,s.jsx)(n.li,{children:"No direct registration needed"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"running-the-sample",children:"Running the Sample"}),"\n",(0,s.jsx)(n.h3,{id:"option-1-with-external-eureka-server",children:"Option 1: With External Eureka Server"}),"\n",(0,s.jsx)(n.h4,{id:"start-eureka-server",children:"Start Eureka Server"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Using Docker\ndocker run -d -p 8761:8761 springcloud/eureka\n\n# Or using Spring Cloud Eureka server JAR\njava -jar eureka-server.jar\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Verify Eureka is running: ",(0,s.jsx)(n.code,{children:"http://localhost:8761"})]}),"\n",(0,s.jsx)(n.h4,{id:"start-admin-server",children:"Start Admin Server"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd spring-boot-admin-samples/spring-boot-admin-sample-eureka\nmvn spring-boot:run\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Access Admin UI at: ",(0,s.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,s.jsx)(n.h3,{id:"option-2-using-docker-compose-recommended",children:"Option 2: Using Docker Compose (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd spring-boot-admin-samples/spring-boot-admin-sample-eureka\ndocker-compose up\n"})}),"\n",(0,s.jsx)(n.p,{children:"This starts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Eureka Server (port 8761)"}),"\n",(0,s.jsx)(n.li,{children:"Admin Server (port 8080)"}),"\n",(0,s.jsx)(n.li,{children:"Spring Cloud Config Server (port 8888)"}),"\n",(0,s.jsx)(n.li,{children:"Sample microservices (customers, stores)"}),"\n",(0,s.jsx)(n.li,{children:"Supporting infrastructure (MongoDB, RabbitMQ)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Access Points"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Admin UI: ",(0,s.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,s.jsxs)(n.li,{children:["Eureka UI: ",(0,s.jsx)(n.code,{children:"http://localhost:8761"})]}),"\n",(0,s.jsxs)(n.li,{children:["Config Server: ",(0,s.jsx)(n.code,{children:"http://localhost:8888"})]}),"\n",(0,s.jsxs)(n.li,{children:["Sample App UI: ",(0,s.jsx)(n.code,{children:"http://localhost:80"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"change-eureka-url",children:"Change Eureka URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mvn spring-boot:run -Dspring-boot.run.arguments=\\\n  --eureka.client.serviceUrl.defaultZone=http://other-eureka:8761/eureka/\n"})}),"\n",(0,s.jsx)(n.p,{children:"Or set environment variable:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export EUREKA_SERVICE_URL=http://other-eureka:8761\nmvn spring-boot:run\n"})}),"\n",(0,s.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,s.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<dependencies>\n    \x3c!-- Admin Server --\x3e\n    <dependency>\n        <groupId>de.codecentric</groupId>\n        <artifactId>spring-boot-admin-starter-server</artifactId>\n    </dependency>\n\n    \x3c!-- Eureka Discovery Client --\x3e\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n    </dependency>\n\n    \x3c!-- Security --\x3e\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-security</artifactId>\n    </dependency>\n\n    \x3c!-- Web (Servlet excluded, uses WebFlux) --\x3e\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-webmvc</artifactId>\n        <exclusions>\n            <exclusion>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-starter-tomcat</artifactId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Tomcat is excluded, so this sample runs on Netty (reactive stack)."]}),"\n",(0,s.jsx)(n.h3,{id:"main-application-class",children:"Main Application Class"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="SpringBootAdminEurekaApplication.java"',children:"@Configuration\n@EnableAutoConfiguration\n@EnableDiscoveryClient  // Enable Eureka discovery\n@EnableAdminServer      // Enable Admin Server\npublic class SpringBootAdminEurekaApplication {\n\n    private final AdminServerProperties adminServer;\n\n    public SpringBootAdminEurekaApplication(AdminServerProperties adminServer) {\n        this.adminServer = adminServer;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootAdminEurekaApplication.class, args);\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Key Annotations"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@EnableDiscoveryClient"}),": Enables Eureka client functionality"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"@EnableAdminServer"}),": Enables Admin Server"]}),"\n",(0,s.jsx)(n.li,{children:"Both work together to discover and monitor services"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"admin-server-configuration",children:"Admin Server Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:'spring:\n  application:\n    name: spring-boot-admin-sample-eureka\n  profiles:\n    active:\n      - secure\n\neureka:\n  instance:\n    leaseRenewalIntervalInSeconds: 10  # Heartbeat interval\n    health-check-url-path: /actuator/health\n    metadata-map:\n      startup: ${random.int}  # Trigger refresh on restart\n  client:\n    registryFetchIntervalSeconds: 5  # Fetch registry every 5s\n    serviceUrl:\n      defaultZone: ${EUREKA_SERVICE_URL:http://localhost:8761}/eureka/\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: "*"  # Expose all actuator endpoints\n  endpoint:\n    health:\n      show-details: ALWAYS\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Configuration Details"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lease Renewal"}),": 10 seconds (faster detection of down instances)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Registry Fetch"}),": 5 seconds (quick discovery of new services)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Health Check"}),": Registered with Eureka"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Startup Metadata"}),": Random value triggers endpoint update after restart"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"client-application-configuration",children:"Client Application Configuration"}),"\n",(0,s.jsx)(n.p,{children:"For applications to be monitored, they only need:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'spring:\n  application:\n    name: my-service  # Service name in Eureka\n\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:8761/eureka/\n  instance:\n    metadata-map:\n      management.context-path: /actuator  # Tell Admin where actuator is\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: "*"  # Expose endpoints\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"No Admin Client dependency needed!"})}),"\n",(0,s.jsx)(n.h2,{id:"security-configuration",children:"Security Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"insecure-profile",children:"Insecure Profile"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Bean\n@Profile("insecure")\npublic SecurityWebFilterChain securityWebFilterChainPermitAll(\n        ServerHttpSecurity http) {\n    return http\n        .authorizeExchange((authorizeExchange) ->\n            authorizeExchange.anyExchange().permitAll())\n        .csrf(ServerHttpSecurity.CsrfSpec::disable)\n        .build();\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"secure-profile-default",children:"Secure Profile (Default)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Bean\n@Profile("secure")\npublic SecurityWebFilterChain securityWebFilterChainSecure(\n        ServerHttpSecurity http) {\n    return http\n        .authorizeExchange((authorizeExchange) ->\n            authorizeExchange\n                .pathMatchers(adminServer.path("/assets/**"))\n                    .permitAll()\n                .pathMatchers("/actuator/health/**")\n                    .permitAll()\n                .pathMatchers(adminServer.path("/login"))\n                    .permitAll()\n                .anyExchange()\n                    .authenticated())\n        .formLogin((formLogin) -> formLogin\n            .loginPage(adminServer.path("/login"))\n            .authenticationSuccessHandler(loginSuccessHandler(...)))\n        .logout((logout) -> logout\n            .logoutUrl(adminServer.path("/logout"))\n            .logoutSuccessHandler(logoutSuccessHandler(...)))\n        .httpBasic(Customizer.withDefaults())\n        .csrf(ServerHttpSecurity.CsrfSpec::disable)\n        .build();\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"docker-compose-setup",children:"Docker Compose Setup"}),"\n",(0,s.jsx)(n.h3,{id:"complete-stack",children:"Complete Stack"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})," provides a complete microservices environment:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:'version: \'2\'\n\nservices:\n  # Eureka Server\n  eureka:\n    image: springcloud/eureka\n    container_name: eureka\n    ports:\n      - "8761:8761"\n    environment:\n      - EUREKA_INSTANCE_PREFERIPADDRESS=true\n\n  # Admin Server\n  admin:\n    build:\n      context: .\n      dockerfile: ./src/main/docker/Dockerfile\n    depends_on:\n      - eureka\n    ports:\n     - "8080:8080"\n    environment:\n      - EUREKA_SERVICE_URL=http://eureka:8761\n      - EUREKA_INSTANCE_PREFER_IP_ADDRESS=true\n\n  # Spring Cloud Config Server\n  config:\n    image: springcloud/configserver\n    depends_on:\n      - eureka\n    ports:\n      - "8888:8888"\n    environment:\n      - EUREKA_SERVICE_URL=http://eureka:8761\n\n  # Sample Microservices\n  customers:\n    image: springcloud/customers\n    depends_on:\n      - config\n      - rabbit\n    environment:\n      - CONFIG_SERVER_URI=http://config:8888\n      - RABBITMQ_HOST=rabbit\n\n  stores:\n    image: springcloud/stores\n    depends_on:\n      - config\n      - rabbit\n      - mongodb\n    environment:\n      - CONFIG_SERVER_URI=http://config:8888\n      - RABBITMQ_HOST=rabbit\n      - MONGODB_HOST=mongodb\n\n  # Infrastructure\n  mongodb:\n    image: tutum/mongodb\n    ports:\n      - "27017:27017"\n    environment:\n      - AUTH=no\n\n  rabbit:\n    image: "rabbitmq:4"\n    ports:\n     - "5672:5672"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"start-stack",children:"Start Stack"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker-compose up\n"})}),"\n",(0,s.jsx)(n.h3,{id:"stop-stack",children:"Stop Stack"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker-compose down\n"})}),"\n",(0,s.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# All services\ndocker-compose logs -f\n\n# Specific service\ndocker-compose logs -f admin\n"})}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsx)(n.h3,{id:"service-discovery-flow",children:"Service Discovery Flow"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Application Startup"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Application starts and registers with Eureka"}),"\n",(0,s.jsx)(n.li,{children:"Sends metadata including actuator path"}),"\n",(0,s.jsx)(n.li,{children:"Eureka assigns instance ID"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Admin Server Discovery"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Admin Server fetches registry from Eureka every 5s"}),"\n",(0,s.jsx)(n.li,{children:"Discovers new services"}),"\n",(0,s.jsx)(n.li,{children:"Reads metadata to find actuator endpoints"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Health Monitoring"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Admin Server polls actuator endpoints"}),"\n",(0,s.jsx)(n.li,{children:"Updates instance status"}),"\n",(0,s.jsx)(n.li,{children:"Triggers notifications on status changes"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Application Shutdown"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Application deregisters from Eureka"}),"\n",(0,s.jsx)(n.li,{children:"Admin Server removes instance from monitoring"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"metadata-mapping",children:"Metadata Mapping"}),"\n",(0,s.jsx)(n.p,{children:"Admin Server reads specific metadata keys:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"eureka:\n  instance:\n    metadata-map:\n      # Required for proper endpoint detection\n      management.context-path: /actuator\n      management.port: 8081  # If different from service port\n\n      # Optional - for authenticated actuators\n      user.name: admin\n      user.password: ${admin.password}\n\n      # Optional - custom metadata\n      startup: ${random.int}  # Triggers refresh\n      environment: production\n      version: ${project.version}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important Keys"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"management.context-path"}),": Where actuator endpoints are located"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"management.port"}),": If management port differs from application port"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"user.name"})," / ",(0,s.jsx)(n.code,{children:"user.password"}),": Credentials for secured actuators"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"startup"}),": Random value forces Admin to refresh endpoints after restart"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"testing-the-sample",children:"Testing the Sample"}),"\n",(0,s.jsx)(n.h3,{id:"verify-eureka-registration",children:"Verify Eureka Registration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Access Eureka UI: ",(0,s.jsx)(n.code,{children:"http://localhost:8761"})]}),"\n",(0,s.jsx)(n.li,{children:'Check "Instances currently registered with Eureka"'}),"\n",(0,s.jsxs)(n.li,{children:["Should see:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"SPRING-BOOT-ADMIN-SAMPLE-EUREKA"})}),"\n",(0,s.jsx)(n.li,{children:"Other registered services"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"verify-admin-server-discovery",children:"Verify Admin Server Discovery"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Access Admin UI: ",(0,s.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,s.jsx)(n.li,{children:"Should see all Eureka-registered services"}),"\n",(0,s.jsxs)(n.li,{children:["Click on each service to view:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Health status"}),"\n",(0,s.jsx)(n.li,{children:"Metrics"}),"\n",(0,s.jsx)(n.li,{children:"Environment"}),"\n",(0,s.jsx)(n.li,{children:"Logs"}),"\n",(0,s.jsx)(n.li,{children:"JVM details"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-dynamic-discovery",children:"Test Dynamic Discovery"}),"\n",(0,s.jsx)(n.h4,{id:"register-new-service",children:"Register New Service"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start another instance\nSERVER_PORT=8081 mvn spring-boot:run\n"})}),"\n",(0,s.jsx)(n.p,{children:"Within 5 seconds, it should appear in Admin UI."}),"\n",(0,s.jsx)(n.h4,{id:"deregister-service",children:"Deregister Service"}),"\n",(0,s.jsx)(n.p,{children:"Stop the application (Ctrl+C). Within ~40 seconds (lease timeout), it should disappear from Admin UI."}),"\n",(0,s.jsx)(n.h3,{id:"test-health-status-changes",children:"Test Health Status Changes"}),"\n",(0,s.jsx)(n.p,{children:"Stop a monitored service and watch status change from UP \u2192 DOWN in Admin UI."}),"\n",(0,s.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"custom-service-filtering",children:"Custom Service Filtering"}),"\n",(0,s.jsx)(n.p,{children:"Filter which services to monitor:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      discovery:\n        ignored-services:\n          - eureka-server  # Don't monitor Eureka itself\n          - config-server  # Don't monitor Config Server\n"})}),"\n",(0,s.jsx)(n.h3,{id:"service-grouping",children:"Service Grouping"}),"\n",(0,s.jsx)(n.p,{children:"Group services using metadata:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Client application\neureka:\n  instance:\n    metadata-map:\n      group: backend-services\n      team: platform\n"})}),"\n",(0,s.jsx)(n.h3,{id:"secure-actuator-endpoints",children:"Secure Actuator Endpoints"}),"\n",(0,s.jsx)(n.p,{children:"If client actuators are secured:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Client application\neureka:\n  instance:\n    metadata-map:\n      user.name: actuator-admin\n      user.password: ${actuator.password}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Admin Server automatically uses these credentials."}),"\n",(0,s.jsx)(n.h3,{id:"custom-health-check-url",children:"Custom Health Check URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"eureka:\n  instance:\n    health-check-url-path: /custom/health\n    metadata-map:\n      management.context-path: /custom\n"})}),"\n",(0,s.jsx)(n.h2,{id:"comparison-eureka-vs-direct-registration",children:"Comparison: Eureka vs. Direct Registration"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Aspect"}),(0,s.jsx)(n.th,{children:"Eureka Discovery"}),(0,s.jsx)(n.th,{children:"Direct Registration"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Setup"})}),(0,s.jsx)(n.td,{children:"Eureka Server required"}),(0,s.jsx)(n.td,{children:"No additional infrastructure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Client Dependency"})}),(0,s.jsx)(n.td,{children:"Only Eureka client"}),(0,s.jsx)(n.td,{children:"Admin Client required"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Discovery"})}),(0,s.jsx)(n.td,{children:"Automatic"}),(0,s.jsx)(n.td,{children:"Manual configuration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Scalability"})}),(0,s.jsx)(n.td,{children:"Excellent (100+ services)"}),(0,s.jsx)(n.td,{children:"Limited (static config)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Dynamic Updates"})}),(0,s.jsx)(n.td,{children:"Automatic"}),(0,s.jsx)(n.td,{children:"Manual restart"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Use Case"})}),(0,s.jsx)(n.td,{children:"Microservices"}),(0,s.jsx)(n.td,{children:"Monoliths, small deployments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Complexity"})}),(0,s.jsx)(n.td,{children:"Higher"}),(0,s.jsx)(n.td,{children:"Lower"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"admin-server-not-discovering-services",children:"Admin Server Not Discovering Services"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check Eureka connectivity"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test Eureka API\ncurl http://localhost:8761/eureka/apps\n\n# Check Admin logs\ndocker-compose logs admin | grep -i eureka\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Common Issues"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Eureka URL incorrect"}),"\n",(0,s.jsx)(n.li,{children:"Network connectivity issues"}),"\n",(0,s.jsx)(n.li,{children:"Services not exposing actuator endpoints"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Verify configuration\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:8761/eureka/  # Trailing slash!\n"})}),"\n",(0,s.jsx)(n.h3,{id:"services-show-as-down",children:"Services Show as DOWN"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check health endpoint"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/actuator/health\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verify metadata"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"eureka:\n  instance:\n    metadata-map:\n      management.context-path: /actuator  # Must match actual path\n"})}),"\n",(0,s.jsx)(n.h3,{id:"slow-discovery",children:"Slow Discovery"}),"\n",(0,s.jsx)(n.p,{children:"Services take too long to appear:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"eureka:\n  client:\n    registryFetchIntervalSeconds: 5  # Reduce from default 30s\n  instance:\n    leaseRenewalIntervalInSeconds: 10  # Reduce from default 30s\n"})}),"\n",(0,s.jsx)(n.h3,{id:"docker-compose-issues",children:"Docker Compose Issues"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Port conflicts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Change ports in docker-compose.yml\nports:\n  - "9090:8080"  # Map to different host port\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Container connectivity"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check network\ndocker network inspect spring-boot-admin-sample-eureka_discovery\n\n# Check container logs\ndocker-compose logs eureka\n"})}),"\n",(0,s.jsx)(n.h2,{id:"production-considerations",children:"Production Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"high-availability",children:"High Availability"}),"\n",(0,s.jsx)(n.p,{children:"Run multiple Eureka servers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"eureka:\n  client:\n    serviceUrl:\n      defaultZone: http://eureka1:8761/eureka/,http://eureka2:8761/eureka/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,s.jsx)(n.p,{children:"Secure Eureka communication:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"eureka:\n  client:\n    serviceUrl:\n      defaultZone: https://${eureka.user}:${eureka.password}@eureka:8761/eureka/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,s.jsx)(n.p,{children:"Optimize for large deployments:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      monitor:\n        period: 20000  # Increase polling interval (ms)\n        connect-timeout: 5000\n        read-timeout: 10000\n\neureka:\n  client:\n    registryFetchIntervalSeconds: 10  # Balance freshness vs. load\n"})}),"\n",(0,s.jsx)(n.h3,{id:"monitoring-eureka-itself",children:"Monitoring Eureka Itself"}),"\n",(0,s.jsx)(n.p,{children:"Register Admin Server with itself:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      discovery:\n        ignored-services: []  # Don't ignore any services\n"})}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsx)(n.p,{children:"This sample demonstrates:"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Service Discovery Integration"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic discovery via Eureka"}),"\n",(0,s.jsx)(n.li,{children:"No Admin Client dependency needed"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Dynamic Monitoring"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Services auto-register/deregister"}),"\n",(0,s.jsx)(n.li,{children:"Real-time discovery updates"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Complete Setup"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Complete microservices stack"}),"\n",(0,s.jsx)(n.li,{children:"Docker Compose orchestration"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Scalable Architecture"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Handles many services efficiently"}),"\n",(0,s.jsx)(n.li,{children:"Centralized monitoring"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Explore ",(0,s.jsx)(n.a,{href:"/4.0.0/docs/samples/sample-consul",children:"Consul Sample"})," for alternative service discovery"]}),"\n",(0,s.jsxs)(n.li,{children:["Review ",(0,s.jsx)(n.a,{href:"/4.0.0/docs/samples/sample-zookeeper",children:"Zookeeper Sample"})," for Apache Zookeeper"]}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.a,{href:"/4.0.0/docs/integration/eureka",children:"Integration Guide"})," for detailed Eureka setup"]}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/4.0.0/docs/samples/sample-hazelcast",children:"Hazelcast Sample"})," for clustering"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/4.0.0/docs/integration/eureka",children:"Eureka Integration Guide"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/4.0.0/docs/client/service-discovery",children:"Service Discovery"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/4.0.0/docs/server/server",children:"Server Configuration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Netflix/eureka/wiki",children:"Netflix Eureka Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);