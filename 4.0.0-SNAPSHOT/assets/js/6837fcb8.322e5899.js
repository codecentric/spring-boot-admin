"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6636],{7751:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"security/index","title":"Security","description":"Spring Boot Admin Server and Client can be secured using Spring Security. This section covers all aspects of securing","source":"@site/docs/05-security/index.md","sourceDirName":"05-security","slug":"/security/","permalink":"/4.0.0-SNAPSHOT/docs/security/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_custom_props":{"icon":"shield"}},"sidebar":"sidebar","previous":{"title":"Hazelcast Clustering","permalink":"/4.0.0-SNAPSHOT/docs/integration/hazelcast"},"next":{"title":"Server Authentication","permalink":"/4.0.0-SNAPSHOT/docs/security/server-authentication"}}');var r=s(4848),t=s(8453);const c={sidebar_position:1,sidebar_custom_props:{icon:"shield"}},a="Security",l={},o=[{value:"Security Overview",id:"security-overview",level:2},{value:"Security Layers",id:"security-layers",level:2},{value:"1. Admin Server Security",id:"1-admin-server-security",level:3},{value:"2. Actuator Endpoint Security",id:"2-actuator-endpoint-security",level:3},{value:"3. CSRF Protection",id:"3-csrf-protection",level:3},{value:"4. Mutual TLS (Optional)",id:"4-mutual-tls-optional",level:3},{value:"Quick Start Examples",id:"quick-start-examples",level:2},{value:"Minimal Secured Server",id:"minimal-secured-server",level:3},{value:"Client with Secured Actuator",id:"client-with-secured-actuator",level:3},{value:"Security Checklist",id:"security-checklist",level:2},{value:"Admin Server",id:"admin-server",level:3},{value:"Client Applications",id:"client-applications",level:3},{value:"Network Security",id:"network-security",level:3},{value:"Common Security Scenarios",id:"common-security-scenarios",level:2},{value:"Scenario 1: Development Environment",id:"scenario-1-development-environment",level:3},{value:"Scenario 2: Production with Role-Based Access",id:"scenario-2-production-with-role-based-access",level:3},{value:"Scenario 3: Kubernetes with Service Accounts",id:"scenario-3-kubernetes-with-service-accounts",level:3},{value:"Scenario 4: Different Credentials per Service",id:"scenario-4-different-credentials-per-service",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Externalize Secrets",id:"1-externalize-secrets",level:3},{value:"2. Use Strong Passwords",id:"2-use-strong-passwords",level:3},{value:"3. Limit Actuator Exposure",id:"3-limit-actuator-exposure",level:3},{value:"4. Enable HTTPS",id:"4-enable-https",level:3},{value:"5. Monitor Security Events",id:"5-monitor-security-events",level:3},{value:"Security Headers",id:"security-headers",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: 401 Unauthorized when accessing instances",id:"issue-401-unauthorized-when-accessing-instances",level:3},{value:"Issue: CSRF token errors on client registration",id:"issue-csrf-token-errors-on-client-registration",level:3},{value:"Issue: Login page not loading",id:"issue-login-page-not-loading",level:3},{value:"Issue: Remember-me not working",id:"issue-remember-me-not-working",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"security",children:"Security"})}),"\n",(0,r.jsx)(n.p,{children:"Spring Boot Admin Server and Client can be secured using Spring Security. This section covers all aspects of securing\nyour Spring Boot Admin deployment."}),"\n",(0,r.jsx)(n.h2,{id:"security-overview",children:"Security Overview"}),"\n",(0,r.jsx)(n.p,{children:"A complete Spring Boot Admin deployment has multiple security concerns:"}),"\n",(0,r.jsx)(n.mermaid,{value:'graph TD\n    A[User Browser] --\x3e|1 Login to Admin UI| B["Spring Boot Admin Server<br/>\u2022 Form login + HTTP Basic authentication<br/>\u2022 CSRF protection for UI<br/>\u2022 Remember-me functionality"]\n    B --\x3e|2 Access actuator endpoints| C["Client Application Instance<br/>\u2022 Secured actuator endpoints<br/>\u2022 Client provides credentials via metadata<br/>\u2022 Server authenticates using instance-auth"]'}),"\n",(0,r.jsx)(n.h2,{id:"security-layers",children:"Security Layers"}),"\n",(0,r.jsx)(n.h3,{id:"1-admin-server-security",children:"1. Admin Server Security"}),"\n",(0,r.jsx)(n.p,{children:"Protect the Admin UI and API endpoints:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication"}),": Form login for UI, HTTP Basic for API clients"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authorization"}),": Role-based access control"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CSRF Protection"}),": Protect against Cross-Site Request Forgery"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Session Management"}),": Remember-me functionality"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"See"}),": ",(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/security/server-authentication",children:"Server Authentication"})]}),"\n",(0,r.jsx)(n.h3,{id:"2-actuator-endpoint-security",children:"2. Actuator Endpoint Security"}),"\n",(0,r.jsx)(n.p,{children:"Secure the client application's actuator endpoints:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Spring Security"}),": Protect actuator with authentication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Credentials Sharing"}),": Pass credentials to Admin Server via metadata"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Per-Service Auth"}),": Different credentials per service"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"See"}),": ",(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/security/actuator-security",children:"Actuator Security"})]}),"\n",(0,r.jsx)(n.h3,{id:"3-csrf-protection",children:"3. CSRF Protection"}),"\n",(0,r.jsx)(n.p,{children:"Configure CSRF tokens for Admin UI while allowing client registration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cookie-based CSRF"}),": JavaScript-friendly token repository"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Exempted Endpoints"}),": Allow ",(0,r.jsx)(n.code,{children:"/instances"})," registration without CSRF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom CSRF Filter"}),": Make token available to JavaScript"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"See"}),": ",(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/security/csrf-protection",children:"CSRF Protection"})]}),"\n",(0,r.jsx)(n.h3,{id:"4-mutual-tls-optional",children:"4. Mutual TLS (Optional)"}),"\n",(0,r.jsx)(n.p,{children:"Enhanced security with client certificates:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mTLS Between Server and Clients"}),": Mutual authentication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Certificate Validation"}),": Trust only specific clients"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSL Configuration"}),": Keystore and truststore setup"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"quick-start-examples",children:"Quick Start Examples"}),"\n",(0,r.jsx)(n.h3,{id:"minimal-secured-server",children:"Minimal Secured Server"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  security:\n    user:\n      name: admin\n      password: ${ADMIN_PASSWORD}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests(auth -> auth\n                .requestMatchers("/assets/**").permitAll()\n                .requestMatchers("/login").permitAll()\n                .anyRequest().authenticated()\n            )\n            .formLogin(formLogin -> formLogin.loginPage("/login"))\n            .httpBasic(Customizer.withDefaults());\n\n        return http.build();\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"client-with-secured-actuator",children:"Client with Secured Actuator"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Client Configuration"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'spring:\n  boot:\n    admin:\n      client:\n        url: http://admin-server:8080\n        instance:\n          metadata:\n            user.name: actuator\n            user.password: ${ACTUATOR_PASSWORD}\n\n  security:\n    user:\n      name: actuator\n      password: ${ACTUATOR_PASSWORD}\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: "*"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Server Configuration"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      instance-auth:\n        enabled: true\n        # Credentials from instance metadata\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security-checklist",children:"Security Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Use this checklist to ensure your deployment is secure:"}),"\n",(0,r.jsx)(n.h3,{id:"admin-server",children:"Admin Server"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable Spring Security"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use strong passwords (externalize via environment variables)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure form login for UI access"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable HTTP Basic for API/programmatic access"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure CSRF protection with exemptions for ",(0,r.jsx)(n.code,{children:"/instances"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Set up remember-me with secure random key"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use HTTPS for deployments"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Restrict access by IP (if applicable)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure session timeout"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Audit authentication attempts"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"client-applications",children:"Client Applications"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Secure actuator endpoints with Spring Security"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Pass actuator credentials via metadata (",(0,r.jsx)(n.code,{children:"user.name"}),", ",(0,r.jsx)(n.code,{children:"user.password"}),")"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use strong actuator passwords"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Limit exposed actuator endpoints to necessary ones"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use HTTPS for actuator if possible"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify Admin Server certificate (if using HTTPS)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Consider mutual TLS for high-security environments"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-security",children:"Network Security"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use HTTPS for all communication"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure firewalls to restrict Admin Server access"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use VPN or private networks when possible"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Enable mutual TLS if required"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor for suspicious access patterns"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-security-scenarios",children:"Common Security Scenarios"}),"\n",(0,r.jsx)(n.h3,{id:"scenario-1-development-environment",children:"Scenario 1: Development Environment"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Simple security for local development."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# Admin Server\nspring:\n  security:\n    user:\n      name: user\n      password: password\n"})}),"\n",(0,r.jsx)(n.p,{children:"No actuator security needed in development."}),"\n",(0,r.jsx)(n.h3,{id:"scenario-2-production-with-role-based-access",children:"Scenario 2: Production with Role-Based Access"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Different roles for read-only vs admin users."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests(auth -> auth\n                .requestMatchers("/assets/**", "/login").permitAll()\n                .requestMatchers("/instances/**").hasRole("ADMIN")\n                .anyRequest().hasAnyRole("ADMIN", "USER")\n            )\n            .formLogin(formLogin -> formLogin.loginPage("/login"))\n            .httpBasic(Customizer.withDefaults());\n\n        return http.build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService(PasswordEncoder encoder) {\n        UserDetails admin = User.builder()\n            .username("admin")\n            .password(encoder.encode(System.getenv("ADMIN_PASSWORD")))\n            .roles("ADMIN")\n            .build();\n\n        UserDetails user = User.builder()\n            .username("viewer")\n            .password(encoder.encode(System.getenv("VIEWER_PASSWORD")))\n            .roles("USER")\n            .build();\n\n        return new InMemoryUserDetailsManager(admin, user);\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"scenario-3-kubernetes-with-service-accounts",children:"Scenario 3: Kubernetes with Service Accounts"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Use Kubernetes service accounts for authentication."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# Admin Server\nspring:\n  boot:\n    admin:\n      discovery:\n        enabled: true\n\n# Spring Security with OAuth2\nspring:\n  security:\n    oauth2:\n      client:\n        registration:\n          keycloak:\n            client-id: spring-boot-admin\n            client-secret: ${OAUTH2_CLIENT_SECRET}\n        provider:\n          keycloak:\n            issuer-uri: https://keycloak.company.com/realms/main\n"})}),"\n",(0,r.jsx)(n.h3,{id:"scenario-4-different-credentials-per-service",children:"Scenario 4: Different Credentials per Service"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Use unique credentials for each client service."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Admin Server"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      instance-auth:\n        enabled: true\n        service-map:\n          service-a:\n            user-name: service-a-actuator\n            user-password: ${SERVICE_A_PASSWORD}\n          service-b:\n            user-name: service-b-actuator\n            user-password: ${SERVICE_B_PASSWORD}\n        default-user-name: default-actuator\n        default-password: ${DEFAULT_PASSWORD}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Client (Service A)"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  application:\n    name: service-a\n\n  security:\n    user:\n      name: service-a-actuator\n      password: ${SERVICE_A_PASSWORD}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"1-externalize-secrets",children:"1. Externalize Secrets"}),"\n",(0,r.jsx)(n.p,{children:"Never hardcode passwords. Use environment variables or secret management:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  security:\n    user:\n      name: ${ADMIN_USER:admin}\n      password: ${ADMIN_PASSWORD}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Docker"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -e ADMIN_PASSWORD=secret123 my-admin-server\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes Secret"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: admin-credentials\ntype: Opaque\ndata:\n  password: c2VjcmV0MTIz  # base64 encoded\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-use-strong-passwords",children:"2. Use Strong Passwords"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Minimum 16 characters"}),"\n",(0,r.jsx)(n.li,{children:"Mix of uppercase, lowercase, numbers, symbols"}),"\n",(0,r.jsx)(n.li,{children:"Use password generators"}),"\n",(0,r.jsx)(n.li,{children:"Rotate regularly"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-limit-actuator-exposure",children:"3. Limit Actuator Exposure"}),"\n",(0,r.jsx)(n.p,{children:"Only expose necessary endpoints:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"management:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,loggers\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-enable-https",children:"4. Enable HTTPS"}),"\n",(0,r.jsx)(n.p,{children:"Use TLS for all communication:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"server:\n  port: 8443\n  ssl:\n    enabled: true\n    key-store: classpath:keystore.p12\n    key-store-password: ${KEYSTORE_PASSWORD}\n    key-store-type: PKCS12\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-monitor-security-events",children:"5. Monitor Security Events"}),"\n",(0,r.jsx)(n.p,{children:"Log authentication attempts and failures:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"logging:\n  level:\n    org.springframework.security: DEBUG\n    de.codecentric.boot.admin: DEBUG\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security-headers",children:"Security Headers"}),"\n",(0,r.jsx)(n.p,{children:"Configure security headers for the Admin UI:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .headers(headers -> headers\n                .contentSecurityPolicy(csp -> csp\n                    .policyDirectives(\"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'\")\n                )\n                .frameOptions(frame -> frame.sameOrigin())\n                .xssProtection(xss -> xss.block(true))\n                .httpStrictTransportSecurity(hsts -> hsts\n                    .includeSubDomains(true)\n                    .maxAgeInSeconds(31536000)\n                )\n            );\n\n        return http.build();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"issue-401-unauthorized-when-accessing-instances",children:"Issue: 401 Unauthorized when accessing instances"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Admin Server doesn't have credentials to access actuator endpoints."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Add credentials to instance metadata:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            user.name: actuator\n            user.password: ${ACTUATOR_PASSWORD}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-csrf-token-errors-on-client-registration",children:"Issue: CSRF token errors on client registration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": CSRF protection blocking ",(0,r.jsx)(n.code,{children:"/instances"})," endpoint."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Exempt registration endpoints from CSRF:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'.csrf(csrf -> csrf\n    .ignoringRequestMatchers(\n        new AntPathRequestMatcher("/instances", POST.name()),\n        new AntPathRequestMatcher("/instances/*", DELETE.name())\n    )\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"issue-login-page-not-loading",children:"Issue: Login page not loading"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Login page assets blocked by security."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Permit access to assets and login:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'.authorizeHttpRequests(auth -> auth\n    .requestMatchers("/assets/**", "/login").permitAll()\n    .anyRequest().authenticated()\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"issue-remember-me-not-working",children:"Issue: Remember-me not working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": No ",(0,r.jsx)(n.code,{children:"UserDetailsService"})," configured."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Add ",(0,r.jsx)(n.code,{children:"UserDetailsService"})," bean:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Bean\npublic InMemoryUserDetailsManager userDetailsService(PasswordEncoder encoder) {\n    UserDetails user = User.builder()\n        .username("admin")\n        .password(encoder.encode("password"))\n        .roles("ADMIN")\n        .build();\n    return new InMemoryUserDetailsManager(user);\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/security/server-authentication",children:"Server Authentication"})," - Secure Admin Server with Spring Security"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/security/actuator-security",children:"Actuator Security"})," - Secure client actuator endpoints"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/security/csrf-protection",children:"CSRF Protection"})," - Configure CSRF for UI and API"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/server/server",children:"Server Configuration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/client/client-features",children:"Client Configuration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.spring.io/spring-security/reference/index.html",children:"Spring Security Documentation"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function c(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);