"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[3214],{4542:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"client/metadata","title":"Metadata and Tags","description":"Metadata allows you to attach custom information to your application registration, which can be used for filtering,","source":"@site/docs/03-client/30-metadata.md","sourceDirName":"03-client","slug":"/client/metadata","permalink":"/4.0.0-SNAPSHOT/docs/client/metadata","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_position":30,"sidebar_custom_props":{"icon":"link"}},"sidebar":"sidebar","previous":{"title":"Application Registration","permalink":"/4.0.0-SNAPSHOT/docs/client/registration"},"next":{"title":"Service Discovery Integration","permalink":"/4.0.0-SNAPSHOT/docs/client/service-discovery"}}');var i=a(4848),r=a(8453);const s={sidebar_position:30,sidebar_custom_props:{icon:"link"}},d="Metadata and Tags",o={},l=[{value:"MetadataContributor",id:"metadatacontributor",level:2},{value:"Built-in Metadata Contributors",id:"built-in-metadata-contributors",level:2},{value:"StartupDateMetadataContributor",id:"startupdatemetadatacontributor",level:3},{value:"CloudFoundryMetadataContributor",id:"cloudfoundrymetadatacontributor",level:3},{value:"CompositeMetadataContributor",id:"compositemetadatacontributor",level:3},{value:"Adding Metadata via Configuration",id:"adding-metadata-via-configuration",level:2},{value:"Static Metadata",id:"static-metadata",level:3},{value:"Dynamic Metadata from Environment",id:"dynamic-metadata-from-environment",level:3},{value:"Custom MetadataContributor",id:"custom-metadatacontributor",level:2},{value:"Kubernetes Metadata",id:"kubernetes-metadata",level:3},{value:"Tags",id:"tags",level:2},{value:"Configuring Tags",id:"configuring-tags",level:3},{value:"Via Metadata",id:"via-metadata",level:4},{value:"Via Info Endpoint",id:"via-info-endpoint",level:4},{value:"Tag Display",id:"tag-display",level:3},{value:"Dynamic Tags",id:"dynamic-tags",level:3},{value:"Metadata Use Cases",id:"metadata-use-cases",level:2},{value:"1. Security Credentials",id:"1-security-credentials",level:3},{value:"2. Service Discovery Integration",id:"2-service-discovery-integration",level:3},{value:"Eureka",id:"eureka",level:4},{value:"Consul",id:"consul",level:4},{value:"3. Grouping Applications",id:"3-grouping-applications",level:3},{value:"4. Custom URLs and Paths",id:"4-custom-urls-and-paths",level:3},{value:"5. Visibility Control",id:"5-visibility-control",level:3},{value:"Accessing Metadata in Admin Server",id:"accessing-metadata-in-admin-server",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Metadata Security",id:"metadata-security",level:2},{value:"Masked Metadata",id:"masked-metadata",level:3},{value:"Secure Transmission",id:"secure-transmission",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"metadata-and-tags",children:"Metadata and Tags"})}),"\n",(0,i.jsx)(n.p,{children:"Metadata allows you to attach custom information to your application registration, which can be used for filtering,\ngrouping, and providing additional context in the Spring Boot Admin UI."}),"\n",(0,i.jsx)(n.h2,{id:"metadatacontributor",children:"MetadataContributor"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"MetadataContributor"})," interface enables you to programmatically add metadata to your application registration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@FunctionalInterface\npublic interface MetadataContributor {\n    Map<String, String> getMetadata();\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"built-in-metadata-contributors",children:"Built-in Metadata Contributors"}),"\n",(0,i.jsx)(n.h3,{id:"startupdatemetadatacontributor",children:"StartupDateMetadataContributor"}),"\n",(0,i.jsx)(n.p,{children:"Automatically adds the application startup timestamp:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class StartupDateMetadataContributor implements MetadataContributor {\n\n    private final OffsetDateTime timestamp = OffsetDateTime.now();\n\n    @Override\n    public Map<String, String> getMetadata() {\n        return singletonMap("startup",\n                          timestamp.format(DateTimeFormatter.ISO_DATE_TIME));\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This metadata is automatically included and helps the Admin Server detect application restarts."}),"\n",(0,i.jsx)(n.h3,{id:"cloudfoundrymetadatacontributor",children:"CloudFoundryMetadataContributor"}),"\n",(0,i.jsx)(n.p,{children:"For Cloud Foundry deployments, adds CF-specific metadata:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class CloudFoundryMetadataContributor implements MetadataContributor {\n\n    @Override\n    public Map<String, String> getMetadata() {\n        Map<String, String> metadata = new HashMap<>();\n        metadata.put("applicationId", vcapApplication.getApplicationId());\n        metadata.put("instanceId", vcapApplication.getInstanceId());\n        // Additional CF metadata\n        return metadata;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Automatically activated when running on Cloud Foundry."}),"\n",(0,i.jsx)(n.h3,{id:"compositemetadatacontributor",children:"CompositeMetadataContributor"}),"\n",(0,i.jsx)(n.p,{children:"Combines multiple metadata contributors:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public class CompositeMetadataContributor implements MetadataContributor {\n\n    private final List<MetadataContributor> delegates;\n\n    public CompositeMetadataContributor(List<MetadataContributor> delegates) {\n        this.delegates = delegates;\n    }\n\n    @Override\n    public Map<String, String> getMetadata() {\n        Map<String, String> metadata = new LinkedHashMap<>();\n        delegates.forEach(delegate -> metadata.putAll(delegate.getMetadata()));\n        return metadata;\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Spring Boot Admin automatically creates a composite contributor from all ",(0,i.jsx)(n.code,{children:"MetadataContributor"})," beans."]}),"\n",(0,i.jsx)(n.h2,{id:"adding-metadata-via-configuration",children:"Adding Metadata via Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"static-metadata",children:"Static Metadata"}),"\n",(0,i.jsx)(n.p,{children:"Add static metadata through properties:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            team: platform-team\n            environment: production\n            region: us-east-1\n            version: 1.0.0\n            support-email: platform@example.com\n"})}),"\n",(0,i.jsx)(n.h3,{id:"dynamic-metadata-from-environment",children:"Dynamic Metadata from Environment"}),"\n",(0,i.jsx)(n.p,{children:"Use property placeholders to inject environment-specific values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            environment: ${APP_ENV:development}\n            version: ${APP_VERSION:unknown}\n            hostname: ${HOSTNAME:localhost}\n            pod-name: ${POD_NAME:}\n            namespace: ${NAMESPACE:default}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"custom-metadatacontributor",children:"Custom MetadataContributor"}),"\n",(0,i.jsx)(n.p,{children:"Create custom metadata contributors for dynamic or computed metadata:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.springframework.stereotype.Component;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Component\npublic class CustomMetadataContributor implements MetadataContributor {\n\n    private final Environment environment;\n    private final BuildProperties buildProperties;\n\n    public CustomMetadataContributor(Environment environment,\n                                    @Autowired(required = false) BuildProperties buildProperties) {\n        this.environment = environment;\n        this.buildProperties = buildProperties;\n    }\n\n    @Override\n    public Map<String, String> getMetadata() {\n        Map<String, String> metadata = new HashMap<>();\n\n        // Add build information\n        if (buildProperties != null) {\n            metadata.put("build.version", buildProperties.getVersion());\n            metadata.put("build.time", buildProperties.getTime().toString());\n            metadata.put("build.artifact", buildProperties.getArtifact());\n        }\n\n        // Add environment information\n        metadata.put("spring.profiles", String.join(",",\n                                                    environment.getActiveProfiles()));\n\n        // Add JVM information\n        metadata.put("java.version", System.getProperty("java.version"));\n        metadata.put("java.vendor", System.getProperty("java.vendor"));\n\n        // Add custom business metadata\n        metadata.put("feature-flags",\n                    environment.getProperty("app.feature-flags", ""));\n\n        return metadata;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"kubernetes-metadata",children:"Kubernetes Metadata"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Component\n@ConditionalOnProperty(name = "kubernetes.enabled", havingValue = "true")\npublic class KubernetesMetadataContributor implements MetadataContributor {\n\n    @Override\n    public Map<String, String> getMetadata() {\n        Map<String, String> metadata = new HashMap<>();\n\n        // Read from environment variables set by Kubernetes\n        metadata.put("k8s.pod", System.getenv("HOSTNAME"));\n        metadata.put("k8s.namespace", System.getenv("POD_NAMESPACE"));\n        metadata.put("k8s.node", System.getenv("NODE_NAME"));\n        metadata.put("k8s.service-account",\n                    System.getenv("SERVICE_ACCOUNT"));\n\n        // Add labels as metadata\n        String labels = System.getenv("POD_LABELS");\n        if (labels != null) {\n            metadata.put("k8s.labels", labels);\n        }\n\n        return metadata;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"tags",children:"Tags"}),"\n",(0,i.jsx)(n.p,{children:"Tags are a special type of metadata used for visual markers in the Admin UI. They appear as colored badges in the\napplication list and instance views."}),"\n",(0,i.jsx)(n.h3,{id:"configuring-tags",children:"Configuring Tags"}),"\n",(0,i.jsx)(n.h4,{id:"via-metadata",children:"Via Metadata"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            tags:\n              environment: production\n              region: us-west-2\n              tier: backend\n"})}),"\n",(0,i.jsx)(n.h4,{id:"via-info-endpoint",children:"Via Info Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"info:\n  tags:\n    environment: production\n    region: us-west-2\n    tier: backend\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tag-display",children:"Tag Display"}),"\n",(0,i.jsx)(n.p,{children:"Tags appear as colored badges:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In the applications list view"}),"\n",(0,i.jsx)(n.li,{children:"In the instance details header"}),"\n",(0,i.jsx)(n.li,{children:"Can be used for filtering and grouping"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"dynamic-tags",children:"Dynamic Tags"}),"\n",(0,i.jsx)(n.p,{children:"Create tags dynamically based on runtime conditions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Component\npublic class DynamicTagMetadataContributor implements MetadataContributor {\n\n    private final Environment environment;\n\n    public DynamicTagMetadataContributor(Environment environment) {\n        this.environment = environment;\n    }\n\n    @Override\n    public Map<String, String> getMetadata() {\n        Map<String, String> metadata = new HashMap<>();\n\n        // Environment tag\n        String env = environment.getProperty("spring.profiles.active", "default");\n        metadata.put("tags.environment", env);\n\n        // Deployment type\n        if (isKubernetes()) {\n            metadata.put("tags.platform", "kubernetes");\n        } else if (isCloudFoundry()) {\n            metadata.put("tags.platform", "cloud-foundry");\n        } else {\n            metadata.put("tags.platform", "standalone");\n        }\n\n        // Health-based tag\n        metadata.put("tags.monitoring", "enabled");\n\n        return metadata;\n    }\n\n    private boolean isKubernetes() {\n        return System.getenv("KUBERNETES_SERVICE_HOST") != null;\n    }\n\n    private boolean isCloudFoundry() {\n        return System.getenv("VCAP_APPLICATION") != null;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"metadata-use-cases",children:"Metadata Use Cases"}),"\n",(0,i.jsx)(n.h3,{id:"1-security-credentials",children:"1. Security Credentials"}),"\n",(0,i.jsx)(n.p,{children:"Pass credentials for actuator endpoint access:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            user.name: ${spring.security.user.name}\n            user.password: ${spring.security.user.password}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Credentials in metadata are masked in the Admin UI but transmitted over the network. Always use HTTPS when transmitting\nsensitive data."})}),"\n",(0,i.jsx)(n.h3,{id:"2-service-discovery-integration",children:"2. Service Discovery Integration"}),"\n",(0,i.jsx)(n.h4,{id:"eureka",children:"Eureka"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"eureka:\n  instance:\n    metadata-map:\n      startup: ${random.int}  # Trigger update on restart\n      user.name: ${spring.security.user.name}\n      user.password: ${spring.security.user.password}\n      tags.environment: ${APP_ENV}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"consul",children:"Consul"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  cloud:\n    consul:\n      discovery:\n        metadata:\n          user-name: ${spring.security.user.name}  # Note: use dashes, not dots\n          user-password: ${spring.security.user.password}\n          environment: production\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Consul does not allow dots (",(0,i.jsx)(n.code,{children:"."}),") in metadata keys. Use dashes (",(0,i.jsx)(n.code,{children:"-"}),") instead."]})}),"\n",(0,i.jsx)(n.h3,{id:"3-grouping-applications",children:"3. Grouping Applications"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            group: Legacy Squad\n            squad: backend-team\n            cost-center: CC-1234\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The Admin UI can use the ",(0,i.jsx)(n.code,{children:"group"})," metadata for visual grouping."]}),"\n",(0,i.jsx)(n.h3,{id:"4-custom-urls-and-paths",children:"4. Custom URLs and Paths"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            management.context-path: /actuator\n            service-url: https://my-app.example.com\n            service-path: /api\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-visibility-control",children:"5. Visibility Control"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="application.yml"',children:"spring:\n  boot:\n    admin:\n      client:\n        instance:\n          metadata:\n            hide-url: true  # Hide service URL in UI\n"})}),"\n",(0,i.jsx)(n.h2,{id:"accessing-metadata-in-admin-server",children:"Accessing Metadata in Admin Server"}),"\n",(0,i.jsx)(n.p,{children:"Metadata is available through the instance object:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Component\npublic class MetadataProcessor {\n\n    public void processInstance(Instance instance) {\n        Map<String, String> metadata = instance.getRegistration().getMetadata();\n\n        String environment = metadata.get("tags.environment");\n        String team = metadata.get("team");\n        String version = metadata.get("version");\n\n        // Process metadata\n        log.info("Instance {} - Environment: {}, Team: {}, Version: {}",\n                instance.getRegistration().getName(),\n                environment, team, version);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Meaningful Keys"}),": Use descriptive, hierarchical keys (e.g., ",(0,i.jsx)(n.code,{children:"tags.environment"}),", ",(0,i.jsx)(n.code,{children:"k8s.namespace"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Avoid Sensitive Data"}),": Don't include secrets unless necessary; use secure transmission"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Keep It Lightweight"}),": Don't overload metadata with large values"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Tags for Visuals"}),": Leverage tags for important visual indicators"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document Metadata"}),": Maintain documentation of your metadata schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Environment Variables"}),": Make metadata configurable per environment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistent Naming"}),": Use consistent naming conventions across services"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Leverage Existing Info"}),": Use ",(0,i.jsx)(n.code,{children:"/actuator/info"})," for build and git information"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"metadata-security",children:"Metadata Security"}),"\n",(0,i.jsx)(n.h3,{id:"masked-metadata",children:"Masked Metadata"}),"\n",(0,i.jsx)(n.p,{children:"The Admin Server masks certain metadata keys by default:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"password"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"secret"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"token"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"credentials"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These values are hidden in the UI but still transmitted to the server."}),"\n",(0,i.jsx)(n.h3,{id:"secure-transmission",children:"Secure Transmission"}),"\n",(0,i.jsx)(n.p,{children:"Always use HTTPS when transmitting sensitive metadata:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"spring:\n  boot:\n    admin:\n      client:\n        url: https://admin-server.example.com  # Use HTTPS\n"})}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/client/client-features",children:"Client Features"})," - Other client capabilities"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/client/registration",children:"Registration"})," - Application registration process"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/client/service-discovery",children:"Service Discovery"})," - Metadata in service discovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/4.0.0-SNAPSHOT/docs/server/security",children:"Security"})," - Securing metadata transmission"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>d});var t=a(6540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);